(this["webpackJsonppaper-telephone"]=this["webpackJsonppaper-telephone"]||[]).push([[0],{42:function(e,t,n){e.exports=n(84)},47:function(e,t,n){},80:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(38),o=n.n(i),u=(n(47),n(1)),l=n(4),c=function e(t){Object(l.a)(this,e),this.number=t,this.writing=null,this.drawing=null,this.author=null};function s(e){return null!=e.drawing||null!=e.writing}function m(e,t){return!(t<0||t>=e.entries.length)&&s(e.entries[t])}var p=function e(t,n){Object(l.a)(this,e),this.player=t,this.entries=Array(n).fill(null);for(var r=0;r<n;r++)this.entries[r]=new c(r)};var h={name:"paper-telephone",setup:function(e){for(var t=e.numPlayers,n=2*t,r=Array(t),a={},i=0;i<t;i++)r[i]=new p(i,n),a["".concat(i)]=i;return{papers:r,numberOfRounds:n,currentSubmissionMethod:null,playerIdsToPaperIdx:a}},turn:{onBegin:function(e,t){e.currentSubmissionMethod=t.turn%2===0?"draw":"write"},onEnd:function(e,t){var n=t.numPlayers,r=e.playerIdsToPaperIdx,a={};return Object.keys(r).forEach((function(e){var t=r[e],i=(n+t-1)%n;a[e]=i})),Object(u.a)({},e,{playerIdsToPaperIdx:a})},endIf:function(e,t){var n=t.turn;return e.papers.every((function(e){return m(e,n-1)}))},activePlayers:{all:"submit",moveLimit:1},stages:{submit:{moves:{SubmitWriting:function(e,t,n){var r=t.playerID,a=t.turn,i=e.playerIdsToPaperIdx[r];e.papers[i].entries[a-1]=Object(u.a)({},e.papers[i].entries[a-1],{writing:n,author:r})},SubmitDrawing:function(e,t,n){var r=t.playerID,a=t.turn,i=e.playerIdsToPaperIdx[r];e.papers[i].entries[a-1]=Object(u.a)({},e.papers[i].entries[a-1],{drawing:n,author:r})}}}}},moves:{},endIf:function(e){var t=e.numberOfRounds;return e.papers.every((function(e){return m(e,t-1)}))?{}:null},minPlayers:2,maxPlayers:10},d=n(9);var v=function(e){var t=e.onImageSelected,n=e.previousPhrase,i=Object(r.useRef)(null),o=Object(r.useRef)(null),u=Object(r.useState)(null),l=Object(d.a)(u,2),c=l[0],s=l[1];return Object(r.useEffect)((function(){i&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){var t=i.current;t.srcObject=e,t.play()}))}),[i]),a.a.createElement("div",null,a.a.createElement("p",null,"Time to draw!"),a.a.createElement("p",null,"Can you draw this phrase?"),a.a.createElement("p",null,n),a.a.createElement("video",{ref:i,autoPlay:!0}),a.a.createElement("canvas",{ref:o,width:480,height:640}),a.a.createElement("button",{onClick:function(){o.current.getContext("2d").drawImage(i.current,0,0,o.current.width,o.current.height),s(o.current.toDataURL("image/jpeg"))}},"Take Pic"),a.a.createElement("button",{onClick:function(){t&&t(c)}},"Submit"))};var f=function(e){var t=e.onPhraseChosen,n=e.previousDrawingUri,r=a.a.useState(""),i=Object(d.a)(r,2),o=i[0],u=i[1];return a.a.createElement("div",null,a.a.createElement("p",null,"Time to write!"),n&&a.a.createElement("img",{src:n,alt:"Foo"}),a.a.createElement("input",{type:"text",value:o,onChange:function(e){u(e.target.value)}}),a.a.createElement("button",{onClick:function(){t(o)}},"Submit"))};var g=function(e){var t=e.moves,n=(e._,e.G),r=e.ctx,i=e.playerID;if(r.gameover)return a.a.createElement("div",null,a.a.createElement("h1",null,"Game over!"));var o=n.playerIdsToPaperIdx[i],u=n.papers[o].entries.slice().reverse().find((function(e){return s(e)})),l=null,c=null;return u&&"write"===n.currentSubmissionMethod&&(l=u.drawing),u&&"draw"===n.currentSubmissionMethod&&(c=u.writing),a.a.createElement("div",null,a.a.createElement("h1",null,"Welcome to Telephone!"),a.a.createElement("p",null,"The current turn is: ",r.turn,", which means its time to:"," ",n.currentSubmissionMethod),a.a.createElement("p",null,"There are ",r.numPlayers," players. You are player ",i),"write"===n.currentSubmissionMethod&&r.activePlayers[i]&&a.a.createElement(f,{onPhraseChosen:function(e){t.SubmitWriting(e)},previousDrawingUri:l}),"draw"===n.currentSubmissionMethod&&r.activePlayers[i]&&a.a.createElement(v,{onImageSelected:function(e){t.SubmitDrawing(e)},previousPhrase:c}),!r.activePlayers[i]&&a.a.createElement("p",null,"Waiting for others to finish their move"))},b=n(40),w=[{game:h,board:g}],y=function(){return a.a.createElement("div",null,a.a.createElement(b.a,{gameServer:"http://paper-gamer.herokuapp.com",lobbyServer:"http://paper-gamer.herokuapp.com",gameComponents:w}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.61b21d35.chunk.js.map