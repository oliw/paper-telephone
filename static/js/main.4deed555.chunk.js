(this["webpackJsonppaper-telephone"]=this["webpackJsonppaper-telephone"]||[]).push([[0],{45:function(e,t,a){e.exports=a(88)},50:function(e,t,a){},84:function(e,t){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(41),o=a.n(i),l=(a(50),a(1)),c=a(5),s=function e(t){Object(c.a)(this,e),this.number=t,this.writing=null,this.drawing=null,this.author=null};function u(e){return null!=e.drawing||null!=e.writing}function m(e,t){return!(t<0||t>=e.entries.length)&&u(e.entries[t])}var d=function e(t,a){Object(c.a)(this,e),this.player=t,this.entries=Array(a).fill(null);for(var n=0;n<a;n++)this.entries[n]=new s(n)};var p={name:"paper-telephone",setup:function(e){for(var t=e.numPlayers,a=2*t,n=Array(t),r={},i=0;i<t;i++)n[i]=new d(i,a),r["".concat(i)]=i;return{papers:n,numberOfRounds:a,currentSubmissionMethod:null,playerIdsToPaperIdx:r}},turn:{onBegin:function(e,t){e.currentSubmissionMethod=t.turn%2===0?"draw":"write"},onEnd:function(e,t){var a=t.numPlayers,n=e.playerIdsToPaperIdx,r={};return Object.keys(n).forEach((function(e){var t=n[e],i=(a+t-1)%a;r[e]=i})),Object(l.a)({},e,{playerIdsToPaperIdx:r})},endIf:function(e,t){var a=t.turn;return e.papers.every((function(e){return m(e,a-1)}))},activePlayers:{all:"submit",moveLimit:1},stages:{submit:{moves:{SubmitWriting:function(e,t,a){var n=t.playerID,r=t.turn,i=e.playerIdsToPaperIdx[n];e.papers[i].entries[r-1]=Object(l.a)({},e.papers[i].entries[r-1],{writing:a,author:n})},SubmitDrawing:function(e,t,a){var n=t.playerID,r=t.turn,i=e.playerIdsToPaperIdx[n];e.papers[i].entries[r-1]=Object(l.a)({},e.papers[i].entries[r-1],{drawing:a,author:n})}}}}},moves:{},endIf:function(e){var t=e.numberOfRounds;return e.papers.every((function(e){return m(e,t-1)}))?{}:null},minPlayers:2,maxPlayers:10},b=a(10),h=a(2),v=h.a.create({container:{display:"flex",flexDirection:"column",alignItems:"center"},canvas:{display:"none"},buttonsContainer:{display:"flex"}});var f=function(e){var t=e.onImageSelected,a=e.previousPhrase,i=Object(n.useRef)(null),o=Object(n.useRef)(null),l=Object(n.useState)(null),c=Object(b.a)(l,2),s=c[0],u=c[1];return Object(n.useEffect)((function(){i&&!s&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){var t=i.current;t.srcObject=e,t.play()}))}),[i,s]),r.a.createElement("div",{className:Object(h.b)(v.container)},r.a.createElement("div",{className:Object(h.b)(v.header)},r.a.createElement("p",null,"Time to draw!")),r.a.createElement("div",{className:Object(h.b)(v.promptContainer)},r.a.createElement("p",null,"Can you draw this phrase and take a picture of it?"),r.a.createElement("p",null,a)),r.a.createElement("div",{className:Object(h.b)(v.drawingContainer)},!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("video",{ref:i,autoPlay:!0}),r.a.createElement("canvas",{className:Object(h.b)(v.canvas),ref:o,width:640,height:480})),s&&r.a.createElement("img",{src:s,alt:"Foo"})),r.a.createElement("div",{className:Object(h.b)(v.buttonsContainer)},!s&&r.a.createElement("button",{onClick:function(){o.current.getContext("2d").drawImage(i.current,0,0,o.current.width,o.current.height),u(o.current.toDataURL("image/jpeg"))}},"Take Pic of your drawing"),s&&r.a.createElement("button",{onClick:function(){return u(null)}},"Take another Pic"),s&&r.a.createElement("button",{onClick:function(){t&&t(s)}},"Submit")))},g="#ffffff",E="#bbded6",y="750px",w="18pt",j=h.a.create({main:{height:"30px",borderRadius:"10px",fontWeight:"bold",borderColor:E,borderWidth:"2px",outline:"none"},primary:{backgroundColor:E,color:g},secondary:{color:E}});function O(e){var t=e.onClick,a=e.children,n=e.type,i="primary"===n,o="primary"!==n;return r.a.createElement("button",{className:Object(h.b)(j.main,i&&j.primary,o&&j.secondary),onClick:t},a)}var x=h.a.create({container:{display:"flex",flexDirection:"column"},input:{fontSize:w,marginBottom:"10px"}});var C=function(e){var t=e.onPhraseChosen,a=e.previousDrawingUri,n=r.a.useState(""),i=Object(b.a)(n,2),o=i[0],l=i[1],c=null==a,s=c?"Lets Begin!":"Guess that phrase!",u=c?"Enter a phrase that the next person will have to draw out.":"Take a look at the picture that the person before you drew. What do you think the word or phrase is?";return r.a.createElement("div",{className:Object(h.b)(x.container)},r.a.createElement("p",null,s),a&&r.a.createElement("img",{src:a,alt:"Foo"}),r.a.createElement("p",null,u),r.a.createElement("input",{className:Object(h.b)(x.input),type:"text",placeholder:"Enter a phrase here",value:o,onChange:function(e){l(e.target.value)}}),r.a.createElement(O,{type:"primary",onClick:function(){t(o)}},"Submit"))},N=h.a.create({container:{width:"100%",minHeight:"100%",position:"absolute",backgroundColor:E,display:"flex",justifyContent:"center",paddingTop:"15px"},innerContainer:{display:"flex",flexDirection:"column"},main:{flexGrow:1},cardContainer:{marginTop:"35px"},card:{width:y,backgroundColor:"white",padding:"25px",borderWidth:"2px",borderRadius:"25px",borderColor:E,borderStyle:"solid"}});function P(e){var t=e.children;return r.a.createElement("div",{className:Object(h.b)(N.card)},t)}var k=function(e){var t=e.moves,a=(e._,e.G),n=e.ctx,i=e.playerID;if(n.gameover)return r.a.createElement("div",{className:Object(h.b)(N.container)},r.a.createElement("h1",null,"Game over!"));if(!i)return r.a.createElement("div",{className:Object(h.b)(N.container)},r.a.createElement("div",{className:Object(h.b)(N.innerContainer)},r.a.createElement("div",{className:Object(h.b)(N.cardContainer)},r.a.createElement(P,null,r.a.createElement("h1",null,"Unknown Player")))));var o=a.playerIdsToPaperIdx[i],l=a.papers[o].entries.slice().reverse().find((function(e){return u(e)})),c=null,s=null;return l&&"write"===a.currentSubmissionMethod&&(c=l.drawing),l&&"draw"===a.currentSubmissionMethod&&(s=l.writing),r.a.createElement("div",{className:Object(h.b)(N.container)},r.a.createElement("div",{className:Object(h.b)(N.innerContainer)},r.a.createElement("div",{className:Object(h.b)(N.cardContainer)},r.a.createElement(P,null,r.a.createElement("div",{className:Object(h.b)(N.header)},r.a.createElement("h1",null,"Now Playing: Paper Telephone!")),r.a.createElement("div",{className:Object(h.b)(N.details)},r.a.createElement("p",null,"The current turn is: ",n.turn,", which means its time to:"," ",a.currentSubmissionMethod),r.a.createElement("p",null,"There are ",n.numPlayers," players. You are player ",i)))),r.a.createElement("div",{className:Object(h.b)(N.cardContainer)},r.a.createElement(P,null,r.a.createElement("div",{className:Object(h.b)(N.main)},"write"===a.currentSubmissionMethod&&n.activePlayers[i]&&r.a.createElement(C,{onPhraseChosen:function(e){t.SubmitWriting(e)},previousDrawingUri:c}),"draw"===a.currentSubmissionMethod&&n.activePlayers[i]&&r.a.createElement(f,{onImageSelected:function(e){t.SubmitDrawing(e)},previousPhrase:s}),!n.activePlayers[i]&&r.a.createElement("p",null,"Waiting for others to finish their move"))))))},S=h.a.create({text:{fontFamily:["Fredoka One","cursive"],color:E,padding:0,margin:0}});function I(){return r.a.createElement("div",null,r.a.createElement("h1",{className:Object(h.b)(S.text)},"Paper Gamer"))}var T=h.a.create({container:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"4px",paddingBottom:"4px",backgroundColor:g,borderBottomWidth:"2px",borderBottomColor:E,borderBottomStyle:"solid"}});var D=function(){return r.a.createElement("div",{className:Object(h.b)(T.container)},r.a.createElement(I,null))},W=a(43),B=h.a.create({container:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},header:{},main:{flexGrow:1,display:"relative"}}),M=[{game:p,board:k}],R=null;R=function(){return r.a.createElement(W.a,{gameServer:"https://games-server.oliverwilkie.com",lobbyServer:"https://games-server.oliverwilkie.com",gameComponents:M})};var G=function(){return r.a.createElement("div",{className:Object(h.b)(B.container)},r.a.createElement("div",{className:Object(h.b)(B.header)},r.a.createElement(D,null)),r.a.createElement("div",{className:Object(h.b)(B.main)},r.a.createElement(R,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.4deed555.chunk.js.map