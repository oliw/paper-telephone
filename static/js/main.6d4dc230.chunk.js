(this["webpackJsonppaper-telephone"]=this["webpackJsonppaper-telephone"]||[]).push([[0],{46:function(e,a,t){e.exports=t(89)},51:function(e,a,t){},85:function(e,a){},89:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(42),o=t.n(l),i=(t(51),t(1)),c=t(6),m=function e(a){Object(c.a)(this,e),this.number=a,this.writing=null,this.drawing=null,this.author=null};function u(e){return null!=e.drawing||null!=e.writing}function s(e,a){return!(a<0||a>=e.entries.length)&&u(e.entries[a])}var d=function e(a,t){Object(c.a)(this,e),this.player=a,this.entries=Array(t).fill(null);for(var n=0;n<t;n++)this.entries[n]=new m(n)};var p={name:"paper-telephone",setup:function(e){for(var a=e.numPlayers,t=2*a,n=Array(a),r={},l=0;l<a;l++)n[l]=new d(l,t),r["".concat(l)]=l;return{papers:n,numberOfRounds:t,currentSubmissionMethod:null,playerIdsToPaperIdx:r}},turn:{onBegin:function(e,a){e.currentSubmissionMethod=a.turn%2===0?"draw":"write"},onEnd:function(e,a){var t=a.numPlayers,n=e.playerIdsToPaperIdx,r={};return Object.keys(n).forEach((function(e){var a=n[e],l=(t+a-1)%t;r[e]=l})),Object(i.a)({},e,{playerIdsToPaperIdx:r})},endIf:function(e,a){var t=a.turn;return e.papers.every((function(e){return s(e,t-1)}))},activePlayers:{all:"submit",moveLimit:1},stages:{submit:{moves:{SubmitWriting:function(e,a,t){var n=a.playerID,r=a.turn,l=e.playerIdsToPaperIdx[n];e.papers[l].entries[r-1]=Object(i.a)({},e.papers[l].entries[r-1],{writing:t,author:n})},SubmitDrawing:function(e,a,t){var n=a.playerID,r=a.turn,l=e.playerIdsToPaperIdx[n];e.papers[l].entries[r-1]=Object(i.a)({},e.papers[l].entries[r-1],{drawing:t,author:n})}}}}},moves:{},endIf:function(e){var a=e.numberOfRounds;return e.papers.every((function(e){return s(e,a-1)}))?{}:null},minPlayers:2,maxPlayers:10},h=t(7),b=t(2),f="#ffffff",v="#bbded6",g="750px",E="18pt",y=b.a.create({main:{height:"30px",borderRadius:"10px",fontWeight:"bold",borderColor:v,borderWidth:"2px",outline:"none"},primary:{backgroundColor:v,color:f},secondary:{color:v}});function w(e){var a=e.onClick,t=e.children,n=e.type,l="primary"===n,o="primary"!==n;return r.a.createElement("button",{className:Object(b.b)(y.main,l&&y.primary,o&&y.secondary),onClick:a},t)}var x=b.a.create({container:{display:"flex",flexDirection:"column",alignItems:"center"},canvas:{display:"none"},buttonsContainer:{display:"flex"}});var j=function(e){var a=e.onImageSelected,t=e.previousPhrase,l=Object(n.useRef)(null),o=Object(n.useRef)(null),i=Object(n.useState)(null),c=Object(h.a)(i,2),m=c[0],u=c[1];return Object(n.useEffect)((function(){l&&!m&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){var a=l.current;a.srcObject=e,a.play()}))}),[l,m]),r.a.createElement("div",{className:Object(b.b)(x.container)},r.a.createElement("div",{className:Object(b.b)(x.header)},r.a.createElement("p",null,"Time to draw!")),r.a.createElement("div",{className:Object(b.b)(x.promptContainer)},r.a.createElement("p",null,"Can you draw this phrase and take a picture of it?"),r.a.createElement("p",null,t)),r.a.createElement("div",{className:Object(b.b)(x.drawingContainer)},!m&&r.a.createElement(r.a.Fragment,null,r.a.createElement("video",{ref:l,autoPlay:!0}),r.a.createElement("canvas",{className:Object(b.b)(x.canvas),ref:o,width:640,height:480})),m&&r.a.createElement("img",{src:m,alt:"Foo"})),r.a.createElement("div",{className:Object(b.b)(x.buttonsContainer)},!m&&r.a.createElement(w,{type:"primary",onClick:function(){o.current.getContext("2d").drawImage(l.current,0,0,o.current.width,o.current.height),u(o.current.toDataURL("image/jpeg"))}},"Take picture"),m&&r.a.createElement(w,{type:"primary",onClick:function(){a&&a(m)}},"Submit"),m&&r.a.createElement(w,{onClick:function(){return u(null)}},"Take a different picture")))},C=b.a.create({container:{display:"flex",flexDirection:"column"},input:{fontSize:E,marginBottom:"10px"}});var O=function(e){var a=e.onPhraseChosen,t=e.previousDrawingUri,n=r.a.useState(""),l=Object(h.a)(n,2),o=l[0],i=l[1],c=null==t,m=c?"Lets Begin!":"Guess that phrase!",u=c?"Enter a phrase that the next person will have to draw out.":"Take a look at the picture that the person before you drew. What do you think the word or phrase is?";return r.a.createElement("div",{className:Object(b.b)(C.container)},r.a.createElement("p",null,m),t&&r.a.createElement("img",{src:t,width:"640",height:"480",alt:"Foo"}),r.a.createElement("p",null,u),r.a.createElement("input",{className:Object(b.b)(C.input),type:"text",placeholder:"Enter a phrase here",value:o,onChange:function(e){i(e.target.value)}}),r.a.createElement(w,{type:"primary",onClick:function(){a(o)}},"Submit"))},N=b.a.create({container:{width:"100%",minHeight:"100%",position:"absolute",backgroundColor:v,display:"flex",justifyContent:"center",paddingTop:"15px"},innerContainer:{display:"flex",flexDirection:"column"},main:{flexGrow:1},cardContainer:{marginTop:"35px"},card:{width:g,backgroundColor:"white",padding:"25px",borderWidth:"2px",borderRadius:"25px",borderColor:v,borderStyle:"solid"}});function k(e){var a=e.children;return r.a.createElement("div",{className:Object(b.b)(N.card)},a)}var R=function(e){var a=e.moves,t=(e._,e.G),n=e.ctx,l=e.playerID;if(n.gameover)return r.a.createElement("div",{className:Object(b.b)(N.container)},r.a.createElement("h1",null,"Game over!"));if(!l)return r.a.createElement("div",{className:Object(b.b)(N.container)},r.a.createElement("div",{className:Object(b.b)(N.innerContainer)},r.a.createElement("div",{className:Object(b.b)(N.cardContainer)},r.a.createElement(k,null,r.a.createElement("h1",null,"Unknown Player")))));var o=t.playerIdsToPaperIdx[l],i=t.papers[o].entries.slice().reverse().find((function(e){return u(e)})),c=null,m=null;return i&&"write"===t.currentSubmissionMethod&&(c=i.drawing),i&&"draw"===t.currentSubmissionMethod&&(m=i.writing),r.a.createElement("div",{className:Object(b.b)(N.container)},r.a.createElement("div",{className:Object(b.b)(N.innerContainer)},r.a.createElement("div",{className:Object(b.b)(N.cardContainer)},r.a.createElement(k,null,r.a.createElement("div",{className:Object(b.b)(N.details)},r.a.createElement("p",null,"The current turn is: ",n.turn,", which means its time to:"," ",t.currentSubmissionMethod),r.a.createElement("p",null,"There are ",n.numPlayers," players. You are player ",l)))),r.a.createElement("div",{className:Object(b.b)(N.cardContainer)},r.a.createElement(k,null,r.a.createElement("div",{className:Object(b.b)(N.main)},"write"===t.currentSubmissionMethod&&n.activePlayers[l]&&r.a.createElement(O,{onPhraseChosen:function(e){a.SubmitWriting(e)},previousDrawingUri:c}),"draw"===t.currentSubmissionMethod&&n.activePlayers[l]&&r.a.createElement(j,{onImageSelected:function(e){a.SubmitDrawing(e)},previousPhrase:m}),!n.activePlayers[l]&&r.a.createElement("p",null,"Waiting for others to finish their move"))))))},S=t(5),I=b.a.create({container:{height:"100%"},mainContainer:{flexGrow:"1"},headerContainer:{display:"flex",flexDirection:"row",justifyContent:"center",width:"100%"},headerLeft:{flex:1,textAlign:"left"},headerMiddle:{flex:1,textAlign:"center"},headerRight:{flex:1,textAlign:"right"}});function P(e){var a=e.currentPlayerName,t=e.onEnter,n=r.a.useState(a),l=Object(h.a)(n,2),o=l[0],i=l[1];return r.a.createElement("div",null,r.a.createElement("p",{className:"phase-title"},"Choose a player name:"),r.a.createElement("input",{type:"text",value:o,onChange:function(e){i(e.target.value)}}),r.a.createElement("span",{className:"buttons"},r.a.createElement("button",{className:"buttons",onClick:function(){""!==o&&t(o)}},"Enter")))}function D(e){var a=e.rooms,t=e.playerName,n=e.handleJoinRoom,l=e.handleLeaveRoom,o=e.handleStartGame,i=a.map((function(e){return r.a.createElement("div",{key:e.gameID},r.a.createElement(G,{room:e,playerName:t,handleJoinRoom:n,handleLeaveRoom:l,handleStartGame:o}))}));return r.a.createElement("div",null,r.a.createElement("p",null,"Choose an existing game to play"),r.a.createElement("p",null,"There are ",a.length," games running atm"),i)}function G(e){var a=e.room,t=e.playerName,n=e.handleJoinRoom,l=e.handleLeaveRoom,o=e.handleStartGame,i=a.gameID,c=a.gameName,m=a.players,u=m.map((function(e){return e.name})).join(","),s=m.find((function(e){return e.name===t})),d=null!=s,p=m.find((function(e){return!e.name})),h=null!=p,b=!d&&h,f=d,v=d&&!h;return r.a.createElement("div",null,r.a.createElement("p",null,"Game: ",c," (id: ",i,")"),r.a.createElement("p",null,"Players Seated: ",u),v&&r.a.createElement("button",{onClick:function(){o(c,{gameID:i,playerID:""+s.id,numPlayers:m.length})}},"Enter"),b&&r.a.createElement("button",{onClick:function(){n(c,i,""+p.id)}},"Join"),f&&r.a.createElement("button",{onClick:function(){l(c,i)}},"Leave"))}function L(e){var a=e.games,t=e.createGame,n=r.a.useState(a[0]),l=Object(h.a)(n,2),o=l[0],i=l[1],c=r.a.useState(2),m=Object(h.a)(c,2),u=m[0],s=m[1],d=o?o.game.name:"--",p=a.map((function(e){return r.a.createElement("option",{key:e.game.name,value:e.game.name},e.game.name)}));return r.a.createElement("div",null,r.a.createElement("p",null,"Lets create a new game"),r.a.createElement("p",null,"Which game do you want to play?"),r.a.createElement("select",{value:d,onChange:function(e){var t=e.target.value;if(""!==t){var n=a.find((function(e){return e.game.name===t}));i(n)}else i(null)}},r.a.createElement("option",{value:""},"Select Game"),p),r.a.createElement("p",null,"And how many players?"),r.a.createElement("select",{value:u,onChange:function(e){var a=e.target.value;s(a)}},function(e){return Object(S.a)(new Array(e.game.maxPlayers+1).keys()).slice(e.game.minPlayers)}(o).map((function(e){return r.a.createElement("option",{key:"num-option-"+e,value:e},e)}))),r.a.createElement("button",{onClick:function(){t(d,u)}},"Create"))}function T(e){e.runningGame;var a=e.runningRoom,t=e.playerName,n=e.handleExitRoom,l="paper-telephone"===a.gameName?"Paper Telephone":"Unknown Game";return r.a.createElement("div",{className:Object(b.b)(I.headerContainer)},r.a.createElement("div",{className:Object(b.b)(I.headerLeft)},r.a.createElement("button",{onClick:function(){n()}},"Leave and return to Lobby")),r.a.createElement("div",{className:Object(b.b)(I.headerMiddle)},"Now playing: ",l),r.a.createElement("div",{className:Object(b.b)(I.headerRight)},"Playing as: ",t))}function M(e){var a=e.runningGame,t=e.rooms,n=e.playerName,l=e.handleExitRoom,o=t.find((function(e){return e.gameID===a.gameID}));return r.a.createElement("div",null,r.a.createElement(T,{runningGame:a,runningRoom:o,playerName:n,handleExitRoom:l}),r.a.createElement(a.app,{gameID:a.gameID,playerID:a.playerID,credentials:a.credentials}))}function W(e){e.errorMsg;var a=e.gameComponents,t=e.rooms,n=(e.phase,e.playerName),l=(e.runningGame,e.handleEnterLobby),o=(e.handleExitLobby,e.handleCreateRoom),i=e.handleJoinRoom,c=e.handleLeaveRoom,m=(e.handleExitRoom,e.handleRefreshRooms,e.handleStartGame);return r.a.createElement("div",null,r.a.createElement(P,{currentPlayerName:n,onEnter:l}),r.a.createElement(D,{rooms:t,playerName:n,handleJoinRoom:i,handleLeaveRoom:c,handleStartGame:m}),r.a.createElement(L,{games:a,createGame:o}))}function B(e){e.errorMsg,e.gameComponents,e.gameInstances,e.phase,e.playerName;var a=e.runningGame;e.handleEnterLobby,e.handleExitLobby,e.handleCreateRoom,e.handleJoinRoom,e.handleLeaveRoom,e.handleExitRoom,e.handleRefreshRooms,e.handleStartGame;return r.a.createElement("div",{className:Object(b.b)(I.container)},a&&r.a.createElement(M,e),!a&&r.a.createElement(W,e))}var J=b.a.create({text:{fontFamily:["Fredoka One","cursive"],color:v,padding:0,margin:0}});function A(){return r.a.createElement("div",null,r.a.createElement("h1",{className:Object(b.b)(J.text)},"Paper Gamer!"))}var U=b.a.create({container:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"4px",paddingBottom:"4px",backgroundColor:f,borderBottomWidth:"2px",borderBottomColor:v,borderBottomStyle:"solid"}});var F=function(){return r.a.createElement("div",{className:Object(b.b)(U.container)},r.a.createElement(A,null))},z=t(44),H=b.a.create({container:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},header:{},main:{flexGrow:1,display:"relative"}}),Y=[{game:p,board:R}];var $=function(){return r.a.createElement("div",{className:Object(b.b)(H.container)},r.a.createElement("div",{className:Object(b.b)(H.header)},r.a.createElement(F,null)),r.a.createElement("div",{className:Object(b.b)(H.main)},r.a.createElement(z.a,{gameServer:"https://games-server.oliverwilkie.com",lobbyServer:"https://games-server.oliverwilkie.com",gameComponents:Y,renderer:B})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.6d4dc230.chunk.js.map